(this["webpackJsonphacker-news-reader"]=this["webpackJsonphacker-news-reader"]||[]).push([[0],{34:function(e,t,n){e.exports=n(68)},68:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(9),c=n.n(a),i=n(7),s=n(5),l=n(4);const u=e=>(t={})=>({type:e,payload:t}),d=(e,t)=>{const n=(e=>({request:u("".concat(e,"_REQUEST")),success:u("".concat(e,"_SUCCESS")),failure:u("".concat(e,"_FAILURE"))}))(e);return(e={})=>r=>t({request:n,payload:e,dispatch:r})},h="@hackerNewsReader/app",p={SET_THEME:"".concat(h,"/SET_THEME"),SET_LAYOUT:"".concat(h,"/SET_LAYOUT")};var m={setTheme:u(p.SET_THEME),setLayout:u(p.SET_LAYOUT)};const f="grid",g="list",y="dark",b="light";var E=(e=(()=>({theme:y,layout:g}))(),{type:t,payload:n})=>{switch(console.log("payload: ",n),t){case p.SET_THEME:case p.SET_LAYOUT:return Object(l.a)(Object(l.a)({},e),n);default:return e}},S=n(24),x=n.n(S);const w=Object({NODE_ENV:"production",PUBLIC_URL:"/hacker-news-reader",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).URL||"http://localhost:3000/",v={"Content-Type":"application/json",Accept:"application/json"};const O=new class{constructor({baseURL:e=w,timeout:t=2e4,headers:n=v,auth:r}){const o=x.a.create({baseURL:e,timeout:t,headers:n,auth:r});o.interceptors.response.use(this.handleSuccess,this.handleError),this.client=o}handleSuccess(e){return e}handleError(e){return Promise.reject(e)}get(e){return this.client.get(e).then(e=>e.data)}post(e,t){return this.client.post(e,t).then(e=>e.data)}put(e,t){return this.client.put(e,t).then(e=>e.data)}patch(e,t){return this.client.patch(e,t).then(e=>e.data)}delete(e){return this.client.delete(e).then(e=>e.data)}}({baseURL:"https://hacker-news.firebaseio.com/v0"}),j={};j.getTopStoryIds=()=>O.get("/topstories".concat(".json?print=pretty")),j.getStory=e=>O.get("/item/".concat(e).concat(".json?print=pretty")),j.getStoriesByPage=(e,t)=>{const n=((e,t=0)=>({begin:t*e,end:(t+1)*e}))(20,t),r=(({begin:e,end:t,items:n})=>n.slice(e,t))({begin:n.begin,end:n.end,items:e}).map(e=>j.getStory(e));return Promise.all(r)};var T=j;const k={FETCH_STORY_IDS_REQUEST:"".concat("@hackerNewsReader/story","/FETCH_STORY_IDS"),FETCH_STORIES:"".concat("@hackerNewsReader/story","/FETCH_STORIES")},_={fetchStoryIds:d(k.FETCH_STORY_IDS,({request:e,payload:t,dispatch:n})=>(n(e.request(t)),T.getTopStoryIds().then(t=>(n(e.success({storyIds:t})),n(_.fetchStories({storyIds:t,page:0})),t)).catch(t=>n(e.failure(t))))),fetchStories:d(k.FETCH_STORIES,({request:e,payload:t,dispatch:n})=>{const r=t.storyIds,o=t.page;return n(e.request(t)),T.getStoriesByPage(r,o).then(t=>n(e.success({stories:t}))).catch(t=>n(e.failure(t)))})};var C=_;var I=(e={storyIds:[],stories:[],page:0,isFetching:!1,error:""},{type:t,payload:n})=>{switch(t){case"".concat(k.FETCH_STORY_IDS,"_REQUEST"):case"".concat(k.FETCH_STORIES,"_REQUEST"):return Object(l.a)(Object(l.a)({},e),{},{isFetching:!0});case"".concat(k.FETCH_STORY_IDS,"_SUCCESS"):return Object(l.a)(Object(l.a)({},e),n);case"".concat(k.FETCH_STORIES,"_SUCCESS"):return Object(l.a)(Object(l.a)({},e),{},{stories:[...e.stories,...n.stories],page:e.page+1,isFetching:!1});default:return e}};var R=Object(s.c)({story:I,app:E}),F=n(25);n(26);var U=function({storageKey:e}){try{const t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(t){return}};var A=function({storageKey:e,state:t}){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(n){}};var H=((e="localStorage")=>{if("undefined"===typeof window||!(e in window))return!1;try{let t=window[e];const n="storage ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(t){return!1}return!0})()?e=>t=>n=>r=>{const o=t.getState(),a=e[r.type],c=n(r),i=t.getState();return a&&("function"===typeof a?a({action:r,loadState:U,saveState:A,prevState:o,nextState:i,dispatch:t.dispatch}):Array.isArray(a)&&a.forEach(e=>e({action:r,loadState:U,saveState:A,prevState:o,nextState:i,dispatch:t.dispatch}))),c}:e=>e=>e=>t=>e(t);const L="".concat("@@hackerNewsReader/storage","/theme"),N="".concat("@@hackerNewsReader/storage","/layout");var D={[p.SET_THEME]:[({action:e,saveState:t})=>t({state:e.payload.theme,storageKey:L})],[p.SET_LAYOUT]:[({action:e,saveState:t})=>t({state:e.payload.layout,storageKey:N})]};const B=[];B.push(F.a),B.push(H(D));var P=Object(s.d)(Object(s.a)(...B),e=>e);var z=e=>Object(s.e)(R,e,P),Y=n(27);const K=Object(Y.a)(e=>e.story.storyIds,e=>e.story.stories,(e,t)=>e.length>t.length);var M=n(1),W=n(28),q=n.n(W),J=n(2);const Q="@media only screen and  (max-width: 480px)",V="@media only screen and  (max-width: 768px)";function G(){const e=Object(J.a)(["\n  display: flex;\n"]);return G=function(){return e},e}function X(){const e=Object(J.a)(["\n  height: ","px;\n"]);return X=function(){return e},e}function $(){const e=Object(J.a)(["\n  height: 20px;\n  border-radius: 2px;\n  margin-right: 8px;\n"]);return $=function(){return e},e}function Z(){const e=Object(J.a)(["\n  margin-left: 12px;\n  font-size: 18px;\n  cursor: pointer;\n"]);return Z=function(){return e},e}function ee(){const e=Object(J.a)(["\n  display: flex;\n  align-items: center;\n"]);return ee=function(){return e},e}function te(){const e=Object(J.a)(["\n  height: 100%;\n  width: 100%;\n  max-width: 85%;\n  margin-left: auto;\n  margin-right: auto;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n\n  "," {\n    max-width: 96%;\n  }\n"]);return te=function(){return e},e}function ne(){const e=Object(J.a)(["\n  background-color: ",";\n  height: ","px;\n  color: ",";\n  width: 100%;\n  box-shadow: 0 1px 0 0 black;\n  position: fixed;\n  top: 0;\n"]);return ne=function(){return e},e}const re=M.c.header(ne(),({theme:e})=>e.backgroundSecondary,48,({theme:e})=>e.text),oe=M.c.div(te(),V),ae=M.c.div(ee()),ce=M.c.div(Z()),ie=(M.c.img($()),M.c.div(X(),48)),se=M.c.a(G());var le=({layout:e,theme:t,setLayout:n,setTheme:r})=>o.a.createElement("div",null,o.a.createElement(re,null,o.a.createElement(oe,null,o.a.createElement(ae,null,o.a.createElement(se,{href:"https://github.com/paulepps",target:"_blank"},"Paul Epps")),o.a.createElement(ae,null,e===g?o.a.createElement(ce,{onClick:()=>n(f)},o.a.createElement("i",{className:"fas fa-th-large"})):o.a.createElement(ce,{onClick:()=>n(g)},o.a.createElement("i",{className:"fas fa-th-list"})),t===b?o.a.createElement(ce,{onClick:()=>r(y)},o.a.createElement("i",{className:"fas fa-moon"})):o.a.createElement(ce,{onClick:()=>r(b)},o.a.createElement("i",{className:"fas fa-sun"}))))),o.a.createElement(ie,null));var ue=Object(i.b)(e=>({layout:e.app.layout,theme:e.app.theme}),e=>({setTheme:t=>e(m.setTheme({theme:t})),setLayout:t=>e(m.setLayout({layout:t}))}))(le),de=n(32),he=n.n(de),pe=n(33),me=n.n(pe);var fe=e=>{let t="";return e&&(e.includes("//")||(e="http://".concat(e)),t=me.a.parse(e).hostname),t.includes("www.")&&(t=t.split("www.")[1]),t};const ge="https://news.ycombinator.com",ye="".concat(ge,"/item?id="),be="".concat(ge,"/user?id=");var Ee=({url:e,id:t})=>{const n="".concat(ye).concat(t);return e||n};function Se(){const e=Object(J.a)(["\n  color: ",";\n\n  &:visited {\n    color: ",";\n  }\n"]);return Se=function(){return e},e}function xe(){const e=Object(J.a)(["\n  font-size: 14px;\n  color: ",";\n"]);return xe=function(){return e},e}function we(){const e=Object(J.a)(["\n  color: ",";\n  display: flex;\n  width: 100%;\n  height: 100%;\n  flex-direction: row;\n  align-items: center;\n  text-decoration: none;\n"]);return we=function(){return e},e}function ve(){const e=Object(J.a)(["\n  color: ",";\n  font-size: 12px;\n"]);return ve=function(){return e},e}function Oe(){const e=Object(J.a)(["\n  color: ",";\n  margin-top: 0;\n  margin-bottom: 6px;\n  font-weight: 400;\n  font-size: 16px;\n  letter-spacing: 0.4px;\n"]);return Oe=function(){return e},e}function je(){const e=Object(J.a)(["\n  border-bottom: 1px solid ",";\n  padding: 14px 24px;\n\n  &:last-child {\n    border-bottom: none;\n  }\n"]);return je=function(){return e},e}const Te=M.c.li(je(),({theme:e})=>e.border),ke=M.c.h3(Oe(),({theme:e})=>e.text),_e=M.c.span(ve(),({theme:e})=>e.textSecondary),Ce=M.c.a(we(),({theme:e})=>e.text),Ie=M.c.div(xe(),({theme:e})=>e.textSecondary),Re=M.c.a(Se(),({theme:e})=>e.textSecondary,({theme:e})=>e.textSecondary);var Fe=({by:e,kids:t=[],score:n,url:r,title:a,id:c,type:i,time:s})=>{const l=fe(r)||"news.ycombinator.com",u=Ee({url:r,id:c}),d="".concat(ye).concat(c);return o.a.createElement(Te,null,o.a.createElement(Ce,{href:u,rel:"nofollow noreferrer noopener",target:"_blank"},o.a.createElement(ke,null,a," ",o.a.createElement(_e,null,"(",l,")"))),o.a.createElement(Ie,null,n," points by"," ",o.a.createElement(Re,{href:"".concat(be).concat(e),rel:"nofollow noreferrer noopener",target:"_blank"},e)," ",o.a.createElement(he.a,{date:new Date(1e3*s).toISOString()})," | ",o.a.createElement(Re,{href:d,rel:"nofollow noreferrer noopener",target:"_blank"},t.length," Comments")))};function Ue(){const e=Object(J.a)(["\n  background-color: ",";\n  border-radius: 4px;\n  margin-left: auto;\n  margin-right: auto;\n  margin-bottom: 20px;\n  display: flex;\n  flex-direction: column;\n"]);return Ue=function(){return e},e}const Ae=M.c.ul(Ue(),({theme:e})=>e.backgroundSecondary);class He extends r.Component{render(){const e=this.props.stories;return o.a.createElement(Ae,null,e.map(e=>o.a.createElement(Fe,Object.assign({key:e.id},e))))}}var Le=He;function Ne(){const e=Object(J.a)(["\n  color: ",";\n  border-top: 1px solid ",";\n  padding: 16px;\n"]);return Ne=function(){return e},e}function De(){const e=Object(J.a)(["\n  color: ",";\n  margin: 0;\n  padding: 16px;\n  padding-bottom: 70px;\n  font-size: 16px;\n  font-weight: 400;\n  flex-grow: 1;\n"]);return De=function(){return e},e}function Be(){const e=Object(J.a)(["\n  background-color: ",";\n  border-bottom-left-radius: ","px;\n  border-bottom-right-radius: ","px;\n  word-break: break-word;\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n"]);return Be=function(){return e},e}function Pe(){const e=Object(J.a)(["\n  display: block;\n  height: 240px;\n  max-width: 100%;\n  border-top-left-radius: ","px;\n  border-top-right-radius: ","px;\n  object-fit: cover;\n"]);return Pe=function(){return e},e}function ze(){const e=Object(J.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return ze=function(){return e},e}function Ye(){const e=Object(J.a)(["\n  flex-direction: column;\n  display: flex;\n  height: 100%;\n"]);return Ye=function(){return e},e}function Ke(){const e=Object(J.a)(["\n  height: 100%;\n"]);return Ke=function(){return e},e}const Me=M.c.li(Ke()),We=M.c.div(Ye()),qe=(M.c.a(ze()),M.c.img(Pe(),4,4)),Je=M.c.div(Be(),({theme:e})=>e.backgroundSecondary,4,4),Qe=M.c.h3(De(),({theme:e})=>e.text),Ve=M.c.div(Ne(),({theme:e})=>e.textSecondary,({theme:e})=>e.border);var Ge=({url:e,title:t,id:n})=>{const r=fe(e)||"news.ycombinator.com",a=Ee({url:e,id:n});return o.a.createElement("a",{href:a,target:"_blank",rel:"nofollow noreferrer nofollow"},o.a.createElement(Me,null,o.a.createElement(We,null,o.a.createElement(qe,{src:"https://miro.medium.com/max/1176/1*F9RzuXseG1VrTjFJd403gw.png"}),o.a.createElement(Je,null,o.a.createElement(Qe,null,t),o.a.createElement(Ve,null,o.a.createElement("div",null,"// ".concat(r)))))))};function Xe(){const e=Object(J.a)(["\n  display: flex;\n  margin-bottom: 20px;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-gap: 32px;\n\n  "," {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  "," {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  "," {\n    grid-template-columns: 1fr;\n  }\n"]);return Xe=function(){return e},e}const $e=M.c.ul(Xe(),"@media only screen and  (min-width: 1400px)",V,Q);class Ze extends r.Component{render(){return o.a.createElement($e,null,this.props.stories.map(e=>o.a.createElement(Ge,Object.assign({key:e.id},e))))}}var et=Ze;function tt(){const e=Object(J.a)(["\n  text-align: center;\n\n  span {\n    color: ",";\n    display: inline-block;\n    margin-left: 4px;\n    margin-right: 4px;\n    font-size: 80px;\n    line-height: 0.1;\n\n    /**\n    * Use the blink animation, which is defined above\n    */\n    animation-name: ",";\n    /**\n    * The total time of animation\n    */\n    animation-duration: 1s;\n    /**\n    * It will repeat itself forever\n    */\n    animation-iteration-count: infinite;\n    /**\n    * This makes sure that the starting style (opacity: .2)\n    * of the animation is applied before the animation starts.\n    * Otherwise we would see a short flash or would have\n    * to set the default styling of the dots to the same\n    * as the animation. Same applies for the ending styles.\n    */\n    animation-fill-mode: both;\n  }\n\n  span:nth-child(2) {\n    animation-delay: 0.2s;\n  }\n  span:nth-child(3) {\n    animation-delay: 0.4s;\n  }\n"]);return tt=function(){return e},e}function nt(){const e=Object(J.a)(["\n  /**\n  * At the start of the animation the dot\n  * has an opacity of .2\n  */\n  0% {\n    opacity: .2;\n  }\n  /**\n  * At 20% the dot is fully visible and\n  * then fades out slowly\n  */\n  20% {\n    opacity: 1;\n  }\n  /**\n  * Until it reaches an opacity of .2 and\n  * the animation can start again\n  */\n  100% {\n    opacity: .2;\n  }\n"]);return nt=function(){return e},e}const rt=Object(M.d)(nt()),ot=M.c.div(tt(),({theme:e})=>e.textSecondary,rt);var at=()=>o.a.createElement(ot,null,o.a.createElement("span",null,"."),o.a.createElement("span",null,"."),o.a.createElement("span",null,"."));const ct={background:"#272727",backgroundSecondary:"#393C3E",text:"#bfbebe",textSecondary:"#848886",border:"#272727"},it={background:"#EAEAEA",backgroundSecondary:"#F8F8F8",text:"#848886",textSecondary:"#aaaaaa",border:"#EAEAEA"};function st(){const e=Object(J.a)(["\n  color: ",";\n  font-size: 14px;\n  text-decoration: underline;\n\n  &:visited {\n    color: ",";\n  }\n"]);return st=function(){return e},e}function lt(){const e=Object(J.a)(["\n  margin-left: 16px;\n\n  i {\n    color: ",";\n  }\n\n  "," {\n    margin-left: 0;\n    margin-right: 16px;\n  }\n"]);return lt=function(){return e},e}function ut(){const e=Object(J.a)(["\n  display: flex;\n"]);return ut=function(){return e},e}function dt(){const e=Object(J.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-top: 24px;\n  margin-bottom: 26px;\n\n  "," {\n    flex-direction: column;\n    align-items: flex-start;\n  }\n"]);return dt=function(){return e},e}function ht(){const e=Object(J.a)(["\n  color: ",";\n  font-size: 20px;\n  font-weight: 300;\n"]);return ht=function(){return e},e}function pt(){const e=Object(J.a)(["\n  width: 85%;\n  margin-left: auto;\n  margin-right: auto;\n  height: 100%;\n  overflow: hidden;\n  padding-bottom: 200px;\n\n  "," {\n    width: 96%;\n  }\n"]);return pt=function(){return e},e}const mt=M.c.div(pt(),V),ft=M.c.h1(ht(),({theme:e})=>e.textSecondary),gt=M.c.div(dt(),Q);M.c.div(ut()),M.c.a(lt(),({theme:e})=>e.text,Q),M.c.a(st(),({theme:e})=>e.textSecondary,({theme:e})=>e.textSecondary);class yt extends r.Component{constructor(...e){super(...e),this.fetchStories=()=>{const e=this.props,t=e.storyIds,n=e.page,r=e.fetchStories;e.isFetching||r({storyIds:t,page:n})}}componentDidMount(){this.props.fetchStoriesFirstPage(),this.setBodyBackgroundColor()}componentDidUpdate(e){e.theme!==this.props.theme&&this.setBodyBackgroundColor()}setBodyBackgroundColor(){this.props.theme===b?document.body.style="background-color: ".concat(it.background,";"):document.body.style="background-color: ".concat(ct.background,";")}render(){const e=this.props,t=e.stories,n=e.layout,r=e.theme,a=e.hasMoreStores;return o.a.createElement(M.a,{theme:r===b?it:ct},o.a.createElement("div",null,o.a.createElement(ue,null),o.a.createElement(mt,null,o.a.createElement(gt,null,o.a.createElement(ft,null,o.a.createElement("div",null,"// Hacker News Reader"))),o.a.createElement(q.a,{dataLength:t.length,next:this.fetchStories,hasMore:a,loader:o.a.createElement(at,null),style:{height:"100%",overflow:"visible"}},n===g?o.a.createElement(Le,{stories:t}):o.a.createElement(et,{stories:t})))))}}yt.defaultProps={stories:[]};var bt=yt;var Et=Object(i.b)(e=>({layout:e.app.layout,theme:e.app.theme,stories:e.story.stories,page:e.story.page,storyIds:e.story.storyIds,isFetching:e.story.isFetching,hasMoreStores:K(e)}),e=>({fetchStories:({storyIds:t,page:n})=>e(C.fetchStories({storyIds:t,page:n})),fetchStoriesFirstPage:()=>e(C.fetchStoryIds())}))(bt);function St(){const e=Object(J.a)(["\n    * {\n      box-sizing: border-box;\n    }\n\n    html, body {\n      font-family: Lato,Helvetica-Neue,Helvetica,Arial,sans-serif;\n      width: 100vw;\n      overflow-x: hidden;\n      margin: 0;\n      padding: 0;\n    }\n\n    ul {\n      list-style: none;\n      padding: 0;\n    }\n\n    a {\n      text-decoration: none;\n\n      &:visited {\n        color: inherit;\n      }\n    }\n  "]);return St=function(){return e},e}var xt=Object(M.b)(St());var wt=()=>{const e={},t=U({storageKey:N}),n=U({storageKey:L});return(t||n)&&(e.app={},e.app.layout=t,e.app.theme=n),e};const vt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ot(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const t=e.installing;t.onstatechange=()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(e=>{console.error("Error during service worker registration:",e)})}(()=>{const e=wt(),t=z(e);c.a.render(o.a.createElement(i.a,{store:t},o.a.createElement("div",null,o.a.createElement(xt,null),o.a.createElement(Et,null))),document.getElementById("root"))})(),function(){if("serviceWorker"in navigator){if(new URL("/hacker-news-reader",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="".concat("/hacker-news-reader","/service-worker.js");vt?(!function(e){fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):Ot(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ot(e)})}}()}},[[34,1,2]]]);
//# sourceMappingURL=main.072b4b8e.chunk.js.map